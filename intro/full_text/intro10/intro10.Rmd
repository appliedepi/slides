---
title: "Introduction to R for<br>Applied Epidemiology"
subtitle: "Introduction to Reprex"
author: "March 2022"
date: '[contact@appliedepi.org](mailto:contact@appliedepi.org)'
output:
  xaringan::moon_reader:
    seal: false
    lib_dir: libs
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
    css: xaringan-themer.css
params:
  lang: "en"
---
class: center, middle, inverse, title-slide

```{r, eval=F, echo=F, include=F}
# Must do in order to render.

pacman::p_load(xaringan)
devtools::install_github("gadenbuie/xaringanExtra")
remotes::install_github("mitchelloharawild/icons")
icons::download_fontawesome()

# Render with xaringan::infinite_moon_reader()
# Slides will appear in viewer, and will update as you edit/save
```


```{r setup, include=FALSE, echo=F}
knitr::opts_chunk$set(echo = FALSE, 
                      warning = FALSE, 
                      message = FALSE, 
                      fig.retina = 3  ## retina more effective than w/h (according to twitter)
                      # fig.width = 16, 
                      # fig.height = 10
                      )
## I dont know why this is included in the example xaringan slide 
## but is something to do with background images
options(htmltools.dir.version = FALSE)

## install and load necessary packages 
pacman::p_load(
  rio,        # importing data  
  here,       # relative file pathways  
  janitor,    # data cleaning and tables
  lubridate,  # working with dates
  sf,         # spatial
  ggspatial,  # spatial
  kableExtra, # for output tables
  xaringanthemer,  # for styling presentation
  tidyverse  # data management and visualization

)

## load packages from github
pacman::p_load_gh(
     "R4IDSR/epichecks"   # bivariate colour maps 
)


# data prep --------------------------------------------------------------------
surv <- rio::import(here::here("data", "surveillance_linelist_clean_20141201.rds"))

#gen <- googlesheets4::read_sheet(
#  "https://docs.google.com/spreadsheets/d/1-Xqv5xvakmhKSxipVP6a9GF3H54RN-rbilhdNhPHx6M/edit#gid=998182281",
#  range = "generic") %>%
#  clean_names()

#mod10 <- googlesheets4::read_sheet(
#  "https://docs.google.com/spreadsheets/d/1-Xqv5xvakmhKSxipVP6a9GF3H54RN-rbilhdNhPHx6M/edit#gid=998182281",
#  range = "mod10", col_types = "c") %>%
#  clean_names()
```

```{r  xaringan-themer, include = FALSE}

## define presentation colours (theme) using {xaringanthemer} package 
## https://pkg.garrickadenbuie.com/xaringanthemer/articles/xaringanthemer.html

## epirhandbook logo colours: 
  ## blue: "#00538c"
  ## green: "#007732"
  ## lighter green: "#48a878"

## see ?style_mono_accent for all the things can customise
style_mono_accent(
  base_color = "#00538c", 
  link_color = "#48a878", 
  ## add logo to the title page (bit bigger)
  title_slide_background_image = "https://raw.githubusercontent.com/appliedepi/slides/master/images/logo.png", 
  title_slide_background_position = "95% 95%", 
  title_slide_background_size = "25%", 
  ## add logo to all following slides
  background_image = "https://raw.githubusercontent.com/appliedepi/slides/master/images/logo.png", 
  background_size = "10%",
  background_position = "100% 0%"
)
```

```{css, echo=F}
    .remark-slide table{
      border: none
    }
    .remark-slide-table {
      
    }
    tr:first-child {
      border-top: none;
  }
    tr:last-child {
    border-bottom: none;
  }
```

# Introduction to R for Applied Epidemiology

### How to get code help

contact@appliedepi.org
---

# Today: objectives & schedule  

**In this module we aim to help you:**  

* Understand how to get help with your code  

--

* Review common error codes and how to solve them 

--

* Learn about help documentation and other resources for code help

--

* Make an error and post a reprex (reproducible example) in the Applied Epi community forum

--

* Complete an end-course feedback survey  

```{r, echo=FALSE, warning=F, message=F}
outline <- dplyr::tribble(
  ~Time, ~Location, ~Topic,
  "25 minutes",   "Main" ,    "Introduction to reprex",
  "2 hours 40 mins",   "Breakouts" ,   "Common errors; reprex post" ,
  "10 minutes",    "Breakouts",   "Feedback survey" ,
  "15 minutes",   "Main" ,    "Closing comments"
)

outline %>% 
  flextable::qflextable() %>% 
  flextable::add_footer_lines("Take breaks as you wish during the exercise")
```


---

# Introduction to reprex 

Today we want to focus on **how to get help** with R code

There are many ways to get help beyond the course! 
* [Applied Epi R Handbook](https://epirhandbook.com/en/)
* [Applied Epi Community Forum](https://appliedepi.org/community/)
* [ChatGPT](https://chat.openai.com/auth/login) or other AI resources
* [Google search](google.com), [Stackoverflow](https://stackoverflow.com/), or [Stackexchange](https://stackexchange.com/)
* [Applied Epi Help Desk](support.appliedepi.org) ( you will receive coupons upon course completion)

For many of the search options, it is important to understand how to make a reproducible example. 

---

# Introduction to reprex

What is a reproducible example (**reprex**)?

* Summarise a problem so readers can re-create it on their own computers
* Should be **minimal**: 
    * Include only data and code require to produce the problem
* Should be **reproducible**: 
    * Include *all* context required to reproduct the problem
    * E.g. packages, simlplified dataframe, commands, R version used, etc.

We will go through a demonstration of how to create and post a reprex. 

Don't feel like you have to type along! You will have the oppportunity to create your own in the exercises. 

---
class: inverse, center, middle  

# Demo: How to make a reprex

```{r, eval = TRUE, echo = FALSE, out.width = "50%"}
# Using here() alone won't work because Rmd folder becomes the rendering root.
# adding xfun::relative_path() creates a dynamic file path between the Rmd location and the here() path.
# It dynamically creates the ../../etc filepath.

knitr::include_graphics(xfun::relative_path(here::here("images", "breakout", "window.png")))
```


---
# This session 

Today's session is split into two parts: 

**Common errors and getting help**

* Error quiz at the start of the session is anonymous, use it to learn! 
* You can re-create the errors if you like, but it is not necessary
* The quiz is primarily there to teach you how to understand errors

**Creating reprex using the ebola analysis** 

* You will have the opportunity to create two reprex examples
* Make sure to post them in the Training post area! 

Remember, we are here to help, not matter where you are in the exercise. 

---
# Remember to post the Reprex in the forum 

Our instructors will review some of the reprex posts and respond with solutions! 

* This will give you the opportunity to experience how to solve your own R code problems in the real world. 

As always, remember to have fun! 

* This is not a test, simply an exercise to help guide you to useful resources available. 

In the future, you can post the R Code forum page to get help from epidemiologists all around the world. 

---

# Datasets available (Extras)

If you have your own data, please feel free to start a new R project with your data! 

Alternatively, you have multiple options for other datasets to use today: 
* Continue working on your Ebola Report
* Continue working on your COVID-19 report
* Start a new R Project with H7N9 outbreak data (available in your course directory)
* Start a new R Project with data available from the {outbreaks} package
   * 1861 Measles outbreak dataset
   * 2015 MERS linelist dataset 
   * Malaria case counts
   
No matter which dataset, remember to consider if you need to start a **new R project**, and **where** the R project should be located! 

For all new datasets, the exercises have some prompts to get you started on working with the data. 

---
# After the exercise

At the end of the session, we will ask you to submit a post course survey. 

We will additionally conduct a final review of the course, as well as showing you where you can use your Help Desk coupons after the course.

---
# Exercise!

* Go to the course website  
* Open the exercise for Module 10, and login
* Follow the exercise to review common errors and answer quiz questions
* Learn about how to get help from different resources
* Create a reprex in the Applied Epi Community Forum on the Training page
* Let an instructor know if you are unsure what to do 

We will recap at the end of the session, including completing the post course survey. 







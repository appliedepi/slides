<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Introduction à R pour Épidémiologie appliquée</title>
    <meta charset="utf-8" />
    <meta name="author" content="" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/tabwid/tabwid.css" rel="stylesheet" />
    <script src="libs/tabwid/tabwid.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">


class: center, middle, inverse, title-slide









&lt;style type="text/css"&gt;
    .remark-slide table{
      border: none
    }
    .remark-slide-table {
      
    }
    tr:first-child {
      border-top: none;
  }
    tr:last-child {
    border-bottom: none;
  }
&lt;/style&gt;

&lt;style type="text/css"&gt;
/* THIS IS A CSS CHUNK - THIS IS A COMMENT */
/* Size of font in code echo. E.g. 10px or 50% */
.remark-code {
  font-size: 70%;
}
/* Size of font in text */
.medium-text {
  font-size: 75%;     
}
/* Size of font in tables */
.small-table table {
  font-size: 6px;     
}
.medium-table table {
  font-size: 8px;     
}
.medium-large-table table {
  font-size: 10px;     
}
&lt;/style&gt;

# Introduction à R pour l'épidémiologie appliquée

### Introduction à la visualisation de données avec {ggplot2}

contact@appliedepi.org
---

# Aujourd'hui : objectifs et calendrier

**Dans ce module, nous avons pour objectif de t'aider à :**

- Comprendre les {ggplot2} "Grammaire du graphisme"
- Construire des diagrammes en boîte, des diagrammes de dispersion, des diagrammes en barres et des histogrammes simples.
- Ajuste les échelles, les thèmes et les étiquettes des graphiques.

&lt;div class="tabwid"&gt;&lt;style&gt;.cl-8f5a0b64{}.cl-8f4ec2f4{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-8f533280{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-8f53328a{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-8f534fd6{width:1.296in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8f534fea{width:0.693in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8f534feb{width:2.857in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8f534ff4{width:1.296in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8f534ff5{width:0.693in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8f534ffe{width:2.857in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8f535008{width:1.296in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8f535009{width:0.693in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8f53500a{width:2.857in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8f535012{width:1.296in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8f535013{width:0.693in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8f53501c{width:2.857in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8f53501d{width:1.296in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8f53501e{width:0.693in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8f535026{width:2.857in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8f535027{width:1.296in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8f535028{width:0.693in;background-color:transparent;vertical-align: top;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8f535029{width:2.857in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8f535030{width:1.296in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8f535031{width:0.693in;background-color:transparent;vertical-align: top;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8f53503a{width:2.857in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8f53503b{width:1.296in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8f53503c{width:0.693in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-8f535044{width:2.857in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}&lt;/style&gt;&lt;table data-quarto-disable-processing='true' class='cl-8f5a0b64'&gt;&lt;thead&gt;&lt;tr style="overflow-wrap:break-word;"&gt;&lt;th class="cl-8f534fd6"&gt;&lt;p class="cl-8f533280"&gt;&lt;span class="cl-8f4ec2f4"&gt;Time&lt;/span&gt;&lt;/p&gt;&lt;/th&gt;&lt;th class="cl-8f534fea"&gt;&lt;p class="cl-8f533280"&gt;&lt;span class="cl-8f4ec2f4"&gt;Part&lt;/span&gt;&lt;/p&gt;&lt;/th&gt;&lt;th class="cl-8f534feb"&gt;&lt;p class="cl-8f533280"&gt;&lt;span class="cl-8f4ec2f4"&gt;Topic&lt;/span&gt;&lt;/p&gt;&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr style="overflow-wrap:break-word;"&gt;&lt;td class="cl-8f534ff4"&gt;&lt;p class="cl-8f533280"&gt;&lt;span class="cl-8f4ec2f4"&gt;20 minutes&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td  rowspan="3"class="cl-8f534ff5"&gt;&lt;p class="cl-8f53328a"&gt;&lt;span class="cl-8f4ec2f4"&gt;Part 1&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-8f534ffe"&gt;&lt;p class="cl-8f533280"&gt;&lt;span class="cl-8f4ec2f4"&gt;Slides: ggplot2 'Grammar of Graphics'&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr style="overflow-wrap:break-word;"&gt;&lt;td class="cl-8f535008"&gt;&lt;p class="cl-8f533280"&gt;&lt;span class="cl-8f4ec2f4"&gt;10 minutes&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-8f53500a"&gt;&lt;p class="cl-8f533280"&gt;&lt;span class="cl-8f4ec2f4"&gt;Demo&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr style="overflow-wrap:break-word;"&gt;&lt;td class="cl-8f535012"&gt;&lt;p class="cl-8f533280"&gt;&lt;span class="cl-8f4ec2f4"&gt;1hr 30 minutes&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-8f53501c"&gt;&lt;p class="cl-8f533280"&gt;&lt;span class="cl-8f4ec2f4"&gt;Exercise&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr style="overflow-wrap:break-word;"&gt;&lt;td class="cl-8f53501d"&gt;&lt;p class="cl-8f533280"&gt;&lt;span class="cl-8f4ec2f4"&gt;20 minutes&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-8f53501e"&gt;&lt;p class="cl-8f53328a"&gt;&lt;span class="cl-8f4ec2f4"&gt;Part 2&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-8f535026"&gt;&lt;p class="cl-8f533280"&gt;&lt;span class="cl-8f4ec2f4"&gt;Slides: Scales, themes &amp;amp; labels&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr style="overflow-wrap:break-word;"&gt;&lt;td class="cl-8f535027"&gt;&lt;p class="cl-8f533280"&gt;&lt;span class="cl-8f4ec2f4"&gt;1 hour&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-8f535028"&gt;&lt;p class="cl-8f53328a"&gt;&lt;span class="cl-8f4ec2f4"&gt;&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-8f535029"&gt;&lt;p class="cl-8f533280"&gt;&lt;span class="cl-8f4ec2f4"&gt;Exercise&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr style="overflow-wrap:break-word;"&gt;&lt;td class="cl-8f535030"&gt;&lt;p class="cl-8f533280"&gt;&lt;span class="cl-8f4ec2f4"&gt;10 minutes&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-8f535031"&gt;&lt;p class="cl-8f53328a"&gt;&lt;span class="cl-8f4ec2f4"&gt;-&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-8f53503a"&gt;&lt;p class="cl-8f533280"&gt;&lt;span class="cl-8f4ec2f4"&gt;Debrief&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;tfoot&gt;&lt;tr style="overflow-wrap:break-word;"&gt;&lt;td  colspan="3"class="cl-8f53503b"&gt;&lt;p class="cl-8f533280"&gt;&lt;span class="cl-8f4ec2f4"&gt;Take breaks as you wish during the exercise&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tfoot&gt;&lt;/table&gt;&lt;/div&gt;

---

class: inverse, center, middle

## Visualisation des données avec {ggplot2}

&lt;img src="../../images/ggplot_intro/ggplot2_hex.png" width="50%" /&gt;

---

# Options de visualisation en R

Aujourd'hui, nous nous concentrons sur {ggplot2} parce qu'il

- est bon pour l'exploration rapide de données multidimensionnelles
- produit des données **haute qualité** des résultats finaux de très haute qualité
- a une grammaire bien structurée =&gt; **grande cohérence**
- est accompagné de nombreux paquets qui étendent les fonctionnalités

Voir les [Galerie de graphes R](https://www.r-graph-gallery.com/ggplot2-package.html) pour t'inspirer.

.footnote[D'autres options de tracé comprennent [**base** R](https://towardsdatascience.com/base-plotting-in-r-eb365da06b22), [**treillis**](https://www.statmethods.net/advgraphs/trellis.html) et [**en intrigue**](https://plotly.com/r/).
]

---

# A-t-il été réalisé avec ggplot ?

&lt;img src="../../images/ggplot_intro/clustering.png" width="100%" /&gt;

.footnote[Images sources [ici](http://r-statistics.co/Top50-Ggplot2-Visualizations-MasterList-R-Code.html) et [ici](https://jcheshire.com/r-spatial-data-hints/great-maps-ggplot2/)]

---

# A-t-il été réalisé avec ggplot ?

&lt;img src="../../images/ggplot_intro/dumbbell_chart.png" width="50%" /&gt;

---

# A-t-elle été réalisée avec ggplot ?

&lt;img src="../../images/ggplot_intro/map.png" width="50%" /&gt;

---

# A-t-elle été réalisée avec ggplot ?

&lt;img src="../../images/ggplot_intro/bike_london.png" width="100%" /&gt;

---

# A-t-elle été réalisée avec ggplot ?

&lt;img src="../../images/ggplot_intro/swiss_map.png" width="90%" /&gt;

---

# A-t-elle été réalisée avec ggplot ?

&lt;img src="../../images/ggplot_intro/phylo_tree.png" width="60%" /&gt;

---

# A-t-elle été réalisée avec ggplot ?

&lt;img src="../../images/ggplot_intro/uk_geography.jpg" width="100%" /&gt;

---

# A-t-elle été réalisée avec ggplot ?

&lt;img src="../../images/ggplot_intro/art_ggplot.png" width="50%" /&gt;

---

# A-t-elle été réalisée avec ggplot ?

&lt;img src="../../images/ggplot_intro/van_gogh.jpg" width="80%" /&gt;

---

# gg-quoi ?

--

- Le {ggplot2} *paquet* est l'outil de visualisation de données le plus populaire en R

--

- Son `ggplot()` *fonction* est au cœur du paquet

--

- Cette approche est connue sous le nom de "ggplotting"

--

- Les figures qui en résultent sont parfois affectueusement appelées "ggplots"

--

{ggplot2} est accompagné de nombreux paquets qui étendent ses fonctionnalités, tels que {gganimate}, {ggthemr}, {ggdendro}, {gghighlight}, {ggforce}...

.footnote[
*Question bonus* Que représente le "gg" dans ces noms ?
]

? ??

- "gg" représente la "grammaire graphique" utilisée pour construire les figures.

---

# Grammaire graphique

Construis un graphique en ajoutant des couches de fonctions qui spécifient des données et des éléments de conception.

--

L'ordre se présente généralement comme suit :

1) **"Ouvre" l'intrigue** à l'aide de la touche `ggplot()` et **spécifie le jeu de données**

--

2) **"Mapper" les colonnes de données** pour "esthétiser" les caractéristiques du tracé (axes, couleur, taille, forme)

--

3) **Affiche les données** sous forme de couches "géom".

--

4) **Modifier "échelles"** comme l'échelle des couleurs ou les points de rupture de l'axe des ordonnées

--

5) **Ajuste les éléments du "thème" qui ne sont pas des données** comme les étiquettes d'axe, le titre, la légende et les polices de caractères

Ces couches sont "ajoutées" séquentiellement à l'aide de **`+`** symboles.

? ??
N'oublie pas que même si les commandes sont longues, il est infiniment plus facile de les modifier et de les recycler que dans Excel

---

# Ouvre le graphique

.pull-left[


```r
ggplot()                   
```

`ggplot()` crée une toile vide.

]

.pull-right[

&lt;img src="intro05-1_fr_files/figure-html/unnamed-chunk-17-1.png" width="504" /&gt;

]

? ??
Ceci n'est qu'une toile vierge, nous n'avons pas défini ce qui doit se trouver dans les axes x et y.
Si plusieurs cadres de données sont nécessaires, ils peuvent être ajoutés dans leurs propres géomes.
La tuyauterie est utile pour apporter des modifications ponctuelles à un ensemble de données avant le traçage.

---

# Ajouter les données

.pull-left[


```r
ggplot(data = surv)                   
```

Attribue le cadre de données à utiliser.

Tu peux aussi utiliser la fonction `%&gt;%` l'opérateur pipe pour "pipe" un cadre de données *dans* `ggplot()`


```r
surv %&gt;%
  ggplot()
```

]

.pull-right[

&lt;img src="intro05-1_fr_files/figure-html/unnamed-chunk-20-1.png" width="504" /&gt;

]

? ??
Ceci n'est qu'une toile vierge, nous n'avons pas défini ce qui doit se trouver dans les axes x et y.
Si plusieurs cadres de données sont nécessaires, ils peuvent être ajoutés dans leurs propres géomes.
La tuyauterie est utile pour apporter des modifications ponctuelles à un ensemble de données avant le traçage.

---

# Ajouter les données

.pull-left[


```r
ggplot(
  data = surv)                   
```

Les nouvelles lignes et les retraits n'auront pas d'impact sur l'exécution du code.

Ils peuvent rendre les commandes plus longues plus faciles à lire...

]

.pull-right[

&lt;img src="intro05-1_fr_files/figure-html/unnamed-chunk-22-1.png" width="504" /&gt;

]

? ??
Ceci n'est qu'une toile vierge, nous n'avons pas défini ce qui doit se trouver dans les axes x et y.
Si plusieurs cadres de données sont nécessaires, ils peuvent être ajoutés dans leurs propres géomes.
La tuyauterie est utile pour apporter des modifications ponctuelles à un ensemble de données avant le traçage.

---

# Les cartographies avec `aes()`

.pull-left[


```r
ggplot(
  data = surv,
* mapping = aes())
```

L'"esthétique" des parcelles est constituée de caractéristiques telles que la position, la couleur, la forme...

`mapping = aes()` fait correspondre les "esthétiques" aux colonnes des données.

]

.pull-right[

&lt;img src="intro05-1_fr_files/figure-html/unnamed-chunk-24-1.png" width="504" /&gt;

]

? ??
Les commandes ggplot ont tendance à devenir très verticales (longues)

---

# Mises en correspondance avec `aes()`

.pull-left[


```r
ggplot(
  data = surv,
  mapping = aes(        
*  x = age_years
   ))               
```

Les cartographies esthétiques sont placées dans `aes()`.

Deux mappings de base sont les axes vers les colonnes, via :  
`x = `

]

.pull-right[

&lt;img src="intro05-1_fr_files/figure-html/unnamed-chunk-26-1.png" width="504" /&gt;

]

? ??
Les commandes ggplot ont tendance à devenir très verticales (longues)

---

# Mises en correspondance avec `aes()`

.pull-left[


```r
ggplot(
  data = surv,
  mapping = aes(        
*  x = age_years,
*  y = ht_cm))
```

Les mappages esthétiques sont placés à l'intérieur de `aes()`.

Deux mappings de base sont les axes vers les colonnes, via :  
`x = ` et `y = `

]

.pull-right[

&lt;img src="intro05-1_fr_files/figure-html/unnamed-chunk-28-1.png" width="504" /&gt;

]

? ??
Les commandes ggplot ont tendance à devenir très verticales (longues)

---

# Ajouter de la géométrie

.pull-left[


```r
ggplot(
  data = surv,
  mapping = aes(
    x = age_years,
    y = ht_cm)) +
*geom_point()
```

Les données sont visualisées à l'aide des commandes "geom", telles que `geom_point()`.

Ces commandes sont "ajoutées"  
avec un **`+`** à la `ggplot()` commande.

]

.pull-right[

&lt;img src="intro05-1_fr_files/figure-html/unnamed-chunk-30-1.png" width="504" /&gt;

]

---

# Géométries

.pull-left[

Voici quelques "géomes" typiques :

| Type de parcelle     | Géom                                                                       | 
| -------------------- | -------------------------------------------------------------------------- |
| Histogrammes         | `geom_histogram()`                                                                           | 
| Points               | `geom_point()`                                                                           | 

.footnote[Liste complète [ici](https://ggplot2.tidyverse.org/reference/)
]

]

.pull-right[

&lt;img src="intro05-1_fr_files/figure-html/unnamed-chunk-31-1.png" width="504" /&gt;

]

---

# Géométries

.pull-left[

Voici quelques "géomes" typiques :

| Type de parcelle     | Géom                                                                       | 
| -------------------- | -------------------------------------------------------------------------- |
| Lignes               | `geom_line()`                                                                           | 
| Diagrammes en barres | `geom_bar()` ou&lt;/br&gt; `geom_col()`                                                                        | 

.footnote[Le choix entre `geom_bar()` et `geom_col()` dépend de la structure de tes données. Liste complète des géomes [ici](https://ggplot2.tidyverse.org/reference/)]

]

.pull-right[

&lt;img src="intro05-1_fr_files/figure-html/unnamed-chunk-32-1.png" width="504" /&gt;

]

---

# Géométries

.pull-left[

Voici quelques "géomes" typiques :

| Type de parcelle     | Géom                                                                       | 
| -------------------- | -------------------------------------------------------------------------- |
| Diagrammes en boîte  | `geom_boxplot()`                                                                           | 
| Diagrammes en violon | `geom_violin()`                                                                           | 

.footnote[Liste complète [ici](https://ggplot2.tidyverse.org/reference/)]

]

.pull-right[

&lt;img src="intro05-1_fr_files/figure-html/unnamed-chunk-33-1.png" width="504" /&gt;

]

---

# Ajouter des géomes

.pull-left[


```r
ggplot(
  data = surv,
  mapping = aes(
   x = age_years,
   y = ht_cm)) +
*geom_point()
```

Avec les axes maintenant mappés, `geom_point()` affiche les données sous forme de points.

]

.pull-right[

&lt;img src="intro05-1_fr_files/figure-html/unnamed-chunk-35-1.png" width="504" /&gt;

]

---

# Ajouter des géomes

.pull-left[


```r
ggplot(
  data = surv,
  mapping = aes(
   x = age_years,
   y = ht_cm)) +
geom_point() +
*geom_smooth()
```

Nous pouvons ajouter des géomes supplémentaires à l'intrigue en cours avec `+`.

*Les géomes apparaissent dans l'ordre où ils sont écrits*: la ligne lissée apparaît au-dessus des points.

]

.pull-right[

&lt;img src="intro05-1_fr_files/figure-html/unnamed-chunk-37-1.png" width="504" /&gt;

]

.footnote[`geom_smooth()` donne les moyennes conditionnelles lissées, ce qui aide à montrer les tendances en présence d'un "surdécoupage" (voir [documentation](https://ggplot2.tidyverse.org/reference/geom_smooth.html))]

? ??

- Explique pourquoi tu pourrais utiliser l'un ou l'autre.

---

# Une petite remarque sur les alinéas

Les alinéas, les espaces et les nouvelles lignes n'ont pas d'impact sur l'exécution du code, et peuvent être variés pour améliorer la lisibilité.


```r
ggplot(data = surv, mapping = aes(x = age_years, y = ht_cm)) + geom_point()
```

--

est la même chose que :


```r
ggplot(data = surv,
       mapping = aes(x = age_years, y = ht_cm)) +
geom_point()
```

--

est la même chose que :


```r
ggplot(
  data = surv,        # use case linelist
  mapping = aes(      # make aesthetic mappings for all geoms
    x = age_years,    # assign x-axis to age column
    y = ht_cm)) +     # assign y-axis to height
geom_point()          # display data as points
```







.footnote[Que préfères-tu ?]

? ??

- Lequel de ces textes est le plus facile à lire pour toi ?
- Explique pourquoi tu pourrais utiliser l'un ou l'autre.
  le style long peut permettre des commentaires/annotations informatifs
- le style court est très dense (plus difficile à lire pour certains). Des scripts plus courts, et alors ? Le nombre de lignes de ton code n'est pas une métrique informative.
- lignes très longues =&gt; il faut faire défiler le texte horizontalement pour les personnes qui ont des écrans plus petits (ce qui n'est pas agréable)
- le style long permet de voir plus facilement quel argument appartient à chaque fonction
- les espaces autour de "=" ou "+" =&gt; facilitent l'analyse pour de nombreuses personnes
- autre ?

---

class: medium-table

# Autre esthétique

En dehors des haches, d'autres "esthétiques" courantes incluent :

| Argument             | Contrôles                                                                  | 
| -------------------- | -------------------------------------------------------------------------- |
| `shape`                     | Affichage du point sous forme de point, d'étoile, de triangle, de carré... | 
| `fill`                     | Le *intérieur* (par exemple pour un graphique en barres ou en boîtes)                                                                        | 
| `color`                     | Les *extérieur* ou barre, boxplot - couleur du point OR                                                                       | 
| `size`                     | Epaisseur du trait, taille du point...                                     | 
| `alpha`                     | Transparence : 0 (invisible) à 1 (opaque)                                  | 
| `width`                     | Largeur des barres du "diagramme à barres                                  | 
| `linetype`                     | Soit pleines, soit en pointillés, soit en pointillés, etc.                 | 
| `binwidth`                     | Largeur des cellules de l'histogramme                                      | 

? ??

Note que "esthétique" dans ggplot a une signification spécifique que tu pourrais associer au mot "aesthetics" en anglais courant. Dans ggplot, ces détails sont appelés "thèmes" et sont ajustés dans une commande theme().

Chaque géom accepte certaines esthétiques, comme `binwidth=` pour `geom_histogram()`

&lt;!-- --- --&gt;

&lt;!-- class: medium-text --&gt;

&lt;!-- # devoirs d'esthétique --&gt;

&lt;!-- .pull-left[ --&gt;

&lt;!-- L'esthétique peut être assignée à l'un ou l'autre des éléments suivants : --&gt;

&lt;!-- **Valeurs statiques** :  --&gt;

&lt;!-- - Assigné **en dehors de `aes()`** --&gt;

&lt;!-- - Même affichage pour toutes les données --&gt;

&lt;!-- ``{r, echo=T, eval=F} --&gt;

&lt;!-- ggplot( --&gt;

&lt;!-- data = surv, --&gt;

&lt;!-- mapping = aes( --&gt;

&lt;!-- x = age_years, --&gt;

&lt;!-- y = ht_cm))+ --&gt;

&lt;!-- geom_point(color = "purple") # static #&lt;&lt; --&gt;

&lt;!-- ``` --&gt;

&lt;!-- ] --&gt;

&lt;!-- .pull-right[ --&gt;

&lt;!-- Quelques exemples : --&gt;

&lt;!-- ``{r,eval = params$lang =="en", message=F, warning=F} --&gt;

&lt;!-- color_purple &lt;- ggplot(data = surv, aes(x = age_years, y = ht_cm))+ --&gt;

&lt;!-- geom_point(color = "purple")+ --&gt;

&lt;!-- theme_minimal(base_size = 16)+ --&gt;

&lt;!-- labs(title = 'Using color = "purple"') --&gt;

&lt;!-- color_hospital &lt;- ggplot() + theme_void() --&gt;

&lt;!-- cowplot::plot_grid(color_purple, color_hospital, --&gt;

&lt;!-- nrow = 2, rel_widths = c(2,2)) --&gt;

&lt;!-- ``` --&gt;

&lt;!-- ``{r, eval = params$lang =="fr", message=F, warning=F} --&gt;

&lt;!-- color_purple &lt;- ggplot(data = surv, aes(x = age_years, y = ht_cm))+ --&gt;

&lt;!-- geom_point(color = "purple")+ --&gt;

&lt;!-- theme_minimal(base_size = 16)+ --&gt;

&lt;!-- labs(title = "Utilisant color = 'purple' (mauve)") --&gt;

&lt;!-- color_hospital &lt;- ggplot() + theme_void() --&gt;

&lt;!-- cowplot::plot_grid(color_purple, color_hospital, --&gt;

&lt;!-- nrow = 2, rel_widths = c(2,2)) --&gt;

&lt;!-- ``` --&gt;

&lt;!-- ``{r, eval = params$lang =="ru", message=F, warning=F} --&gt;

&lt;!-- color_purple &lt;- ggplot(data = surv, aes(x = age_years, y = ht_cm))+ --&gt;

&lt;!-- geom_point(color = "purple")+ --&gt;

&lt;!-- theme_minimal(base_size = 16)+ --&gt;

&lt;!-- labs(title = "Использование цвета = 'violet'") --&gt;

&lt;!-- color_hospital &lt;- ggplot() + theme_void() --&gt;

&lt;!-- cowplot::plot_grid(color_purple, color_hospital, --&gt;

&lt;!-- nrow = 2, rel_widths = c(2,2)) --&gt;

&lt;!-- ``` --&gt;

&lt;!-- ``{r,eval = params$lang =="es", message=F, warning=F} --&gt;

&lt;!-- color_purple &lt;- ggplot(data = surv, aes(x = age_years, y = ht_cm))+ --&gt;

&lt;!-- geom_point(color = "purple")+ --&gt;

&lt;!-- theme_minimal(base_size = 16)+ --&gt;

&lt;!-- labs(title = "Utilizar el color = 'purple' (púrpura)") --&gt;

&lt;!-- color_hospital &lt;- ggplot() + theme_void() --&gt;

&lt;!-- cowplot::plot_grid(color_purple, color_hospital, --&gt;

&lt;!-- nrow = 2, rel_widths = c(2,2)) --&gt;

&lt;!-- ``` --&gt;

&lt;!-- ] --&gt;

&lt;!-- --- --&gt;

&lt;!-- class: medium-text --&gt;

&lt;!-- # devoirs d'esthétique --&gt;

&lt;!-- .pull-left[ --&gt;

&lt;!-- L'esthétique peut être assignée à l'un ou l'autre des éléments suivants : --&gt;

&lt;!-- **Valeurs statiques** :  --&gt;

&lt;!-- - Assignées **en dehors de `aes()`** --&gt;

&lt;!-- - Même affichage pour toutes les données --&gt;

&lt;!-- ``{r, echo=T, eval=F} --&gt;

&lt;!-- ggplot( --&gt;

&lt;!-- data = surv, --&gt;

&lt;!-- mapping = aes( --&gt;

&lt;!-- x = age_years, --&gt;

&lt;!-- y = ht_cm))+ --&gt;

&lt;!-- geom_point(color = "purple") # static #&lt;&lt; --&gt;

&lt;!-- ``` --&gt;

&lt;!-- **Une colonne de données** :   --&gt;

&lt;!-- - Affectée **à l'intérieur de `aes()`** --&gt;

&lt;!-- - Affiche les données sous forme de "groupes" --&gt;

&lt;!-- ``{r, echo=T, eval=F} --&gt;

&lt;!-- ggplot( --&gt;

&lt;!-- data = surv, --&gt;

&lt;!-- mapping = aes( --&gt;

&lt;!-- x = age_years, --&gt;

&lt;!-- y = ht_cm, --&gt;

&lt;!-- color = hospital))+ # dynamique #&lt;&lt; --&gt;

&lt;!-- geom_point() --&gt;

&lt;!-- ``` --&gt;

&lt;!-- ] --&gt;

&lt;!-- .pull-right[ --&gt;

&lt;!-- Quelques exemples : --&gt;

&lt;!-- ``{r, eval = params$lang == "en", message=F, warning=F} --&gt;

&lt;!-- color_purple &lt;- ggplot(data = surv, aes(x = age_years, y = ht_cm))+ --&gt;

&lt;!-- geom_point(color = "purple")+ --&gt;

&lt;!-- theme_minimal(base_size = 16)+ --&gt;

&lt;!-- labs(title = "Using color = 'purple'") --&gt;

&lt;!-- color_hospital &lt;- ggplot(data = surv, aes(x = age_years, y = ht_cm))+ --&gt;

&lt;!-- geom_point(aes(color = hospital))+ --&gt;

&lt;!-- theme_minimal(base_size = 16)+ --&gt;

&lt;!-- labs(title = "Using aes(color = hospital)") --&gt;

&lt;!-- cowplot::plot_grid(color_purple, color_hospital, --&gt;

&lt;!-- nrow = 2, rel_widths = c(2,2)) --&gt;

&lt;!-- ``` --&gt;

&lt;!-- ``{r, eval = params$lang =="fr", message=F, warning=F} --&gt;

&lt;!-- color_purple &lt;- ggplot(data = surv, aes(x = age_years, y = ht_cm))+ --&gt;

&lt;!-- geom_point(color = "purple")+ --&gt;

&lt;!-- theme_minimal(base_size = 16)+ --&gt;

&lt;!-- labs(title = "Utilisant color = 'purple' (mauve)") --&gt;

&lt;!-- color_hospital &lt;- ggplot(data = surv, aes(x = age_years, y = ht_cm))+ --&gt;

&lt;!-- geom_point(aes(color = hospital))+ --&gt;

&lt;!-- theme_minimal(base_size = 16)+ --&gt;

&lt;!-- labs(title = "Utilisant aes(color = hospital)") --&gt;

&lt;!-- cowplot::plot_grid(color_purple, color_hospital, --&gt;

&lt;!-- nrow = 2, rel_widths = c(2,2)) --&gt;

&lt;!-- ``` --&gt;

&lt;!-- ``{r, eval = params$lang =="ru", message=F, warning=F} --&gt;

&lt;!-- color_purple &lt;- ggplot(data = surv, aes(x = age_years, y = ht_cm))+ --&gt;

&lt;!-- geom_point(color = "purple")+ --&gt;

&lt;!-- theme_minimal(base_size = 16)+ --&gt;

&lt;!-- labs(title = "Использование цвета = 'violet' (сиреневый)") --&gt;

&lt;!-- color_hospital &lt;- ggplot(data = surv, aes(x = age_years, y = ht_cm))+ --&gt;

&lt;!-- geom_point(aes(color = hôpital))+ --&gt;

&lt;!-- theme_minimal(base_size = 16)+ --&gt;

&lt;!-- labs(title = "Использование aes(color = hospital), больница") --&gt;

&lt;!-- cowplot::plot_grid(color_purple, color_hospital, --&gt;

&lt;!-- nrow = 2, rel_widths = c(2,2)) --&gt;

&lt;!-- ``` --&gt;

&lt;!-- ``{r, eval = params$lang =="es", message=F, warning=F} --&gt;

&lt;!-- color_purple &lt;- ggplot(data = surv, aes(x = age_years, y = ht_cm))+ --&gt;

&lt;!-- geom_point(color = "purple")+ --&gt;

&lt;!-- theme_minimal(base_size = 16)+ --&gt;

&lt;!-- labs(title = "Utilizar el color = 'purple' (púrpura)") --&gt;

&lt;!-- color_hospital &lt;- ggplot(data = surv, aes(x = age_years, y = ht_cm))+ --&gt;

&lt;!-- geom_point(aes(color = hospital))+ --&gt;

&lt;!-- theme_minimal(base_size = 16)+ --&gt;

&lt;!-- labs(title = "Utilizar aes(color = hospital)") --&gt;

&lt;!-- cowplot::plot_grid(color_purple, color_hospital, --&gt;

&lt;!-- nrow = 2, rel_widths = c(2,2)) --&gt;

&lt;!-- ``` --&gt;

&lt;!-- ] --&gt;

&lt;!-- --- --&gt;

&lt;!-- class: medium-text --&gt;

&lt;!-- # devoirs d'esthétique --&gt;

&lt;!-- .pull-left[ --&gt;

&lt;!-- L'esthétique peut être assignée à l'un ou l'autre des éléments suivants : --&gt;

&lt;!-- **Valeurs statiques** :   --&gt;

&lt;!-- Même affichage pour toutes les données --&gt;

&lt;!-- ``{r, echo=T, eval=F} --&gt;

&lt;!-- ggplot( --&gt;

&lt;!-- data = surv, --&gt;

&lt;!-- mapping = aes(x = date_onset)) + --&gt;

&lt;!-- geom_histogram(fill = "purple") # static #&lt;&lt; --&gt;

&lt;!-- ``` --&gt;

&lt;!-- **Une colonne de données (dynamique)** :   --&gt;

&lt;!-- Affiche les données sous forme de "groupes" --&gt;

&lt;!-- ``{r, echo=T, eval=F} --&gt;

&lt;!-- ggplot( --&gt;

&lt;!-- data = surv, --&gt;

&lt;!-- mapping = aes( --&gt;

&lt;!-- x = date_onset, --&gt;

&lt;!-- color = district)) + # dynamique #&lt;&lt; --&gt;

&lt;!-- geom_histogram() --&gt;

&lt;!-- ``` --&gt;

&lt;!-- ] --&gt;

&lt;!-- .pull-right[ --&gt;

&lt;!-- D'autres exemples :  --&gt;

&lt;!-- ``{r, eval = params$lang == "en", message=F, warning=F} --&gt;

&lt;!-- fill_purple &lt;- ggplot(data = surv, aes(x = date_onset))+ --&gt;

&lt;!-- geom_histogram(fill = "purple")+ --&gt;

&lt;!-- theme_minimal(base_size = 16)+ --&gt;

&lt;!-- labs(title = "Using fill = 'purple'") --&gt;

&lt;!-- fill_hospital &lt;- ggplot(data = surv, aes(x = date_onset))+ --&gt;

&lt;!-- geom_histogram(aes(fill = hôpital))+ --&gt;

&lt;!-- theme_minimal(base_size = 16)+ --&gt;

&lt;!-- labs(title = "Using aes(fill = hospital)") --&gt;

&lt;!-- cowplot::plot_grid( --&gt;

&lt;!-- fill_purple, fill_hospital, --&gt;

&lt;!-- nrow = 2, rel_widths = c(2,2)) --&gt;

&lt;!-- ``` --&gt;

&lt;!-- ``{r,eval = params$lang =="fr", message=F, warning=F} --&gt;

&lt;!-- fill_purple &lt;- ggplot(data = surv, aes(x = date_onset))+ --&gt;

&lt;!-- geom_histogram(fill = "purple")+ --&gt;

&lt;!-- theme_minimal(base_size = 16)+ --&gt;

&lt;!-- labs(title = "Utilisant fill = 'purple' (mauve)") --&gt;

&lt;!-- fill_hospital &lt;- ggplot(data = surv, aes(x = date_onset))+ --&gt;

&lt;!-- geom_histogram(aes(fill = hôpital))+ --&gt;

&lt;!-- theme_minimal(base_size = 16)+ --&gt;

&lt;!-- labs(title = "Utilisant aes(fill = hospital)") --&gt;

&lt;!-- cowplot::plot_grid( --&gt;

&lt;!-- fill_purple, fill_hospital, --&gt;

&lt;!-- nrow = 2, rel_widths = c(2,2)) --&gt;

&lt;!-- ``` --&gt;

&lt;!-- ``{r, eval = params$lang =="ru", message=F, warning=F} --&gt;

&lt;!-- fill_purple &lt;- ggplot(data = surv, aes(x = date_onset))+ --&gt;

&lt;!-- geom_histogram(fill = "purple")+ --&gt;

&lt;!-- theme_minimal(base_size = 16)+ --&gt;

&lt;!-- labs(title = "Использование fill = 'purple' (сиреневый)") --&gt;

&lt;!-- fill_hospital &lt;- ggplot(data = surv, aes(x = date_onset))+ --&gt;

&lt;!-- geom_histogram(aes(fill = hôpital))+ --&gt;

&lt;!-- theme_minimal(base_size = 16)+ --&gt;

&lt;!-- labs(title = "Использование aes(fill= hôpital), больница") --&gt;

&lt;!-- cowplot::plot_grid( --&gt;

&lt;!-- fill_purple, fill_hospital, --&gt;

&lt;!-- nrow = 2, rel_widths = c(2,2)) --&gt;

&lt;!-- ``` --&gt;

&lt;!-- ``{r, eval = params$lang =="es", message=F, warning=F} --&gt;

&lt;!-- fill_purple &lt;- ggplot(data = surv, aes(x = date_onset))+ --&gt;

&lt;!-- geom_histogram(fill = "purple")+ --&gt;

&lt;!-- theme_minimal(base_size = 16)+ --&gt;

&lt;!-- labs(title = "Utilizar fill = 'purple' (púrpura)") --&gt;

&lt;!-- fill_hospital &lt;- ggplot(data = surv, aes(x = date_onset))+ --&gt;

&lt;!-- geom_histogram(aes(fill = hospital))+ --&gt;

&lt;!-- theme_minimal(base_size = 16)+ --&gt;

&lt;!-- labs(title = "Utilizar aes(fill = hospital)") --&gt;

&lt;!-- cowplot::plot_grid( --&gt;

&lt;!-- fill_purple, fill_hospital, --&gt;

&lt;!-- nrow = 2, rel_widths = c(2,2)) --&gt;

&lt;!-- ``` --&gt;

&lt;!-- ] --&gt;

---

# Affectation esthétique statique

.pull-left[


```r
ggplot(
  data = surv,
  mapping = aes(
    x = age_years,
    y = ht_cm)) + 
*geom_point(color = "seagreen")
```

**Statique** Les affectations esthétiques sont à un **valeur de nombre ou de caractère**.

Le changement s'applique à **tous** points de données.

Écrit **à l'extérieur `aes()`**.

Autres exemples statiques que tu pourrais utiliser :  
`size = 3`  
`alpha = 0.5`  
`fill = "purple"`

]

.pull-right[

&lt;img src="intro05-1_fr_files/figure-html/unnamed-chunk-45-1.png" width="504" /&gt;

]

---

# Affectation esthétique dynamique

.pull-left[


```r
ggplot(
  data = surv,
  mapping = aes(
    x = age_years,
    y = ht_cm,
*   color = hospital)) +
geom_point()
```

**Dynamique** Les affectations esthétiques sont associées à un **nom de colonne**.

Cela crée **groupes** dans le graphique et génère une légende.

Cela s'écrit **à l'intérieur `aes()`**.

]

.pull-right[

&lt;img src="intro05-1_fr_files/figure-html/unnamed-chunk-47-1.png" width="504" /&gt;

]

? ??

---

# Statique et dynamique

.pull-left[


```r
ggplot(
  data = surv,
  mapping = aes(
    x = age_years,
    y = ht_cm,
*   color = hospital)) +  
geom_point(
* size = 7, 
* alpha = 0.6) 
```

Ci-dessus , `size = 7` et `alpha = 0.5` sont attribués de façon statique, en dehors de `aes()`.

`color=` est affectée à la colonne `hospital` à l'intérieur de `aes()`.

]

.pull-right[

&lt;img src="intro05-1_fr_files/figure-html/unnamed-chunk-49-1.png" width="504" /&gt;

]

.footnote[En savoir plus sur l'esthétique des ggplots [ici](https://ggplot2.tidyverse.org/articles/ggplot2-specs.html)
]

? ??
Comme il n'y a qu'un seul géom, toutes les esthétiques peuvent être écrites en `ggplot()` ou en `geom_point()`

---

# Facettes

.pull-left[


```r
ggplot(
  data = surv,
  mapping = aes(x = date_onset)) +
geom_histogram() +
*facet_wrap(~hospital)
```

Les groupes peuvent également être affichés de cette façon.

Les facettes sont des "petits multiples"

`facet_wrap()` produit un tracé  
par valeur unique dans la colonne.

"~" devant le nom de la colonne est comme le mot "par" (... "par hôpital").

]

.pull-right[

&lt;img src="intro05-1_fr_files/figure-html/unnamed-chunk-51-1.png" width="504" /&gt;

]

? ??
Appelés aussi "petits multiples"

---

# Facettes

.pull-left[


```r
ggplot(
  data = surv,
  mapping = aes(x = date_onset)) +
geom_histogram() +
*facet_wrap(~hospital,
            scales = "free_y")
```

 Axes "libres" à échelle automatique avec `scales=`

- "free\_y"
- "free\_x"
- "free" (à la fois x et y)

]

.footnote[
Alerte ton public si tu utilises des axes libres !
Essaie aussi `ncol=` et `nrow=`

]

.pull-right[

&lt;img src="intro05-1_fr_files/figure-html/unnamed-chunk-53-1.png" width="504" /&gt;







]

---

# Facettes + `gghighlight()`

.pull-left[

Les paquets d'extension ggplot comme {gghighlight} sont utiles.

`gghighlight()` projette une "ombre" derrière chaque facette.


```r
ggplot(
  data = surv,
  mapping = aes(
    x = date_onset,
*   fill = hospital)) +
geom_histogram() +
facet_wrap(~ hospital) +
*gghighlight()
```

]

.pull-right[

&lt;img src="intro05-1_fr_files/figure-html/unnamed-chunk-58-1.png" width="504" /&gt;

]

---

# gghighlight

.pull-left[

`gghighlight()` peut également mettre en évidence des valeurs spécifiques dans d'autres types de tracés


```r
surv %&gt;% 
  # get weekly counts by hospital
  group_by(
     hospital,
     week = floor_date(date_onset, "week")
     ) %&gt;%
  count() %&gt;% 
  
  # plot
  ggplot(
    mapping = aes(
      x = week,
      y = n,
      color = hospital)) +
  geom_line() +
* gghighlight(
*   hospital == "Port Hospital")+
  theme(legend.position = "none")
```







]

.pull-right[

&lt;img src="intro05-1_fr_files/figure-html/unnamed-chunk-63-1.png" width="504" /&gt;

]

.footnote[Le code regroupe les cas par semaine et par hôpital, et transmet les chiffres à ggplot].

? ??
Nous créons ici un cadre de données des cas par semaine et par hôpital, et nous le traçons avec `geom_line()`. La mise en évidence est appliquée à l'hôpital de Port.

---

class: inverse, center, middle

## Exercice

Va sur le site du cours  
Ouvre le premier exercice du module 5 et connecte-toi.  
Suis les instructions pour ouvrir ton projet R "ebola" et continuer à coder.  
Informe un instructeur si tu n'es pas sûr de ce que tu dois faire.

&lt;img src="../../images/breakout/Safety Match - COVID artwork.png" width="50%" /&gt;


    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>

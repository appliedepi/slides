<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Introducci√≥n a Rpara la Epidemiolog√≠a Aplicada</title>
    <meta charset="utf-8" />
    <meta name="author" content="Applied Epi" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/panelset/panelset.css" rel="stylesheet" />
    <script src="libs/panelset/panelset.js"></script>
    <link href="libs/tabwid/tabwid.css" rel="stylesheet" />
    <script src="libs/tabwid/tabwid.js"></script>
    <script src="libs/htmlwidgets/htmlwidgets.js"></script>
    <link href="libs/datatables-css/datatables-crosstalk.css" rel="stylesheet" />
    <script src="libs/datatables-binding/datatables.js"></script>
    <script src="libs/jquery/jquery-3.6.0.min.js"></script>
    <link href="libs/dt-core/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="libs/dt-core/css/jquery.dataTables.extra.css" rel="stylesheet" />
    <script src="libs/dt-core/js/jquery.dataTables.min.js"></script>
    <link href="libs/crosstalk/css/crosstalk.min.css" rel="stylesheet" />
    <script src="libs/crosstalk/js/crosstalk.min.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">


class: center, middle, inverse, title-slide







&lt;style type="text/css"&gt;
    .remark-slide table{
      border: none
    }
    .remark-slide-table {
      
    }
    tr:first-child {
      border-top: none;
  }
    tr:last-child {
    border-bottom: none;
  }
&lt;/style&gt;

&lt;style type="text/css"&gt;
/* THIS IS A CSS CHUNK - THIS IS A COMMENT */
/* Size of font in code echo. E.g. 10px or 50% */
.remark-code {
  font-size: 70%;
}
/* Size of font in text */
.medium-text {
  font-size: 75%;     
}
/* Size of font in tables */
.small-table table {
  font-size: 6px;     
}
.medium-table table {
  font-size: 8px;     
}

.medium-large-table table {
  font-size: 10px;     
}

.medium-large-table2 table {
  font-size: 11px;     
}

.small-code .remark-code{
  font-size: 40%
}
&lt;/style&gt;



# Introducci√≥n a R para &lt;/br&gt; Epidemiolog√≠a Aplicada

### El caso pr√°ctico del √©bola y la limpieza de datos

[contact@appliedepi.org](mailto:contact@appliedepi.org)

---

# Objetivos y calendario

- Crear un nuevo proyecto RStudio para el caso pr√°ctico del √©bola
- Importa los datos de una subcarpeta del proyecto utilizando `import()` y `here()`
- Familiarizarte con {dplyr} funciones de limpieza de datos
- Empieza a escribir un comando de limpieza utilizando la funci√≥n `%&gt;%` operador de tuber√≠a

&lt;/br&gt;

&lt;div class="tabwid"&gt;&lt;style&gt;.cl-f59a64e8{}.cl-f587c22a{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-f58fc434{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-f59008e0{width:1.033in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f59008f4{width:2.358in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f59008f5{width:1.033in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f59008fe{width:2.358in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f59008ff{width:1.033in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f5900908{width:2.358in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f5900909{width:1.033in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f5900912{width:2.358in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f5900913{width:1.033in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-f590091c{width:2.358in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}&lt;/style&gt;&lt;table data-quarto-disable-processing='true' class='cl-f59a64e8'&gt;&lt;thead&gt;&lt;tr style="overflow-wrap:break-word;"&gt;&lt;th class="cl-f59008e0"&gt;&lt;p class="cl-f58fc434"&gt;&lt;span class="cl-f587c22a"&gt;Time&lt;/span&gt;&lt;/p&gt;&lt;/th&gt;&lt;th class="cl-f59008f4"&gt;&lt;p class="cl-f58fc434"&gt;&lt;span class="cl-f587c22a"&gt;Topic&lt;/span&gt;&lt;/p&gt;&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr style="overflow-wrap:break-word;"&gt;&lt;td class="cl-f59008f5"&gt;&lt;p class="cl-f58fc434"&gt;&lt;span class="cl-f587c22a"&gt;10 minutes&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-f59008fe"&gt;&lt;p class="cl-f58fc434"&gt;&lt;span class="cl-f587c22a"&gt;Set up of the Ebola case study&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr style="overflow-wrap:break-word;"&gt;&lt;td class="cl-f59008f5"&gt;&lt;p class="cl-f58fc434"&gt;&lt;span class="cl-f587c22a"&gt;20 minutes&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-f59008fe"&gt;&lt;p class="cl-f58fc434"&gt;&lt;span class="cl-f587c22a"&gt;Functions for data cleaning&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr style="overflow-wrap:break-word;"&gt;&lt;td class="cl-f59008f5"&gt;&lt;p class="cl-f58fc434"&gt;&lt;span class="cl-f587c22a"&gt;10 minutes&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-f59008fe"&gt;&lt;p class="cl-f58fc434"&gt;&lt;span class="cl-f587c22a"&gt;Demo of data cleaning&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr style="overflow-wrap:break-word;"&gt;&lt;td class="cl-f59008ff"&gt;&lt;p class="cl-f58fc434"&gt;&lt;span class="cl-f587c22a"&gt;2 hours&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-f5900908"&gt;&lt;p class="cl-f58fc434"&gt;&lt;span class="cl-f587c22a"&gt;Exercise&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr style="overflow-wrap:break-word;"&gt;&lt;td class="cl-f5900909"&gt;&lt;p class="cl-f58fc434"&gt;&lt;span class="cl-f587c22a"&gt;20 minutes&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-f5900912"&gt;&lt;p class="cl-f58fc434"&gt;&lt;span class="cl-f587c22a"&gt;Debrief&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;tfoot&gt;&lt;tr style="overflow-wrap:break-word;"&gt;&lt;td  colspan="2"class="cl-f5900913"&gt;&lt;p class="cl-f58fc434"&gt;&lt;span class="cl-f587c22a"&gt;Take breaks as you wish during the exercise&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tfoot&gt;&lt;/table&gt;&lt;/div&gt;

???
F√≠jate en las pausas de estiramiento.

---

# Revisa

- **Proyectos RStudio** - un hogar para los datos y scripts de un an√°lisis concreto

--

- Ejecutar comandos en **un script de R**, con comentarios

--

- Creando **objetos** con el operador de asignaci√≥n **`&lt;-`**

--

- Utilizando **funciones** como `max()`, `min()` y `paste()`

--

- Importar un conjunto de datos con **`import()`**

--

- Revisar un conjunto de datos con `skim()` y `summary()`

--

- Las columnas tienen **clases** que pueden comprobarse con `class()`

---

class: inverse, center, middle

# El caso pr√°ctico del √©bola

Los m√≥dulos 2-8 utilizar√°n datos de un brote simulado de √©bola en Sierra Leona.

---

# Un nuevo proyecto de RStudio

.pull-left[

El ejercicio te guiar√° para crear un nuevo **proyecto RStudio** en la carpeta "intro\_curso/**√©bola**/".

&lt;img src="../../images/functions_packages/project_briefcase.png" width="85%" /&gt;

]

.pull-right[

üìÅ intro\_curso

- üìÇ m√≥dulo1
- üìÇ covid
- **üìÅ √©bola**
  - **ebola.Rproj**
  - üìÅ datos
  - üìÅ salidas
  - üìÇ guiones

]

---

# Un nuevo R Script

.pull-left[

Escribir√°s un nuevo script de R llamado "ebola\_an√°lisis.R" para guardar tus comandos.

El script se guardar√° en la subcarpeta "ebola/**scripts**/"

&lt;img src="../../images/data_cleaning/ebola_setup.png" width="100%" height="200%" /&gt;

]

.pull-right[

üìÅ intro\_curso

- üìÅ m√≥dulo1
- üìÅ covid
- üìÅ **√©bola**
  - **ebola.Rproj**
  - üìÅ datos
  - üìÇ salidas
  - üìÇ **guiones**
    - **an√°lisis\_√©bola.R**

]

---

# Cargar paquetes

¬øCu√°l ser√° tu primer comando en el nuevo script de R? ¬øQu√© funci√≥n utilizar√°?

--

Utiliza **`pacman::p_load()`** para **cargar los paquetes** necesarios para el an√°lisis


```r
pacman::p_load(
     rio,          # for importing data
     here,         # for relative file paths
     skimr,        # for reviewing the data
     janitor,      # for cleaning data
     epikit,       # for creating age categories
     tidyverse     # for data management and visualization
)
```

---

# Importar datos de una subcarpeta

La lista de l√≠neas del √©bola se guarda en la subcarpeta "**datos**/**en bruto**/":

üìÅ **√©bola**

- ebola.Rproj
- üìÇ **datos**
  - üìÅ limpia
  - üìÇ **en bruto**
    - **surveillance\_linelist\_20141201.csv**
- üìÇ scripts
- üìÇ salidas

`import()` espera un *ruta de archivo* - la ubicaci√≥n o "direcci√≥n" de los datos en tu ordenador.

¬øFuncionar√° este comando para importar la lista de l√≠neas del √âbola?


```r
import("surveillance_linelist_20141201.csv")
```

--

**No** tienes que especificar qu√© *subcarpeta* del proyecto se guardan los datos.

---

# Rutas de los archivos

**Evita** la fr√°gil ruta de archivo "absoluta *(s√≥lo funciona en un ordenador)*


```r
import("C:/Users/Me/Docs/intro_course/ebola/data/raw/surveillance_linelist_20141201.csv")
```

--

**En un proyecto de RStudio** la ruta puede empezar en la carpeta ra√≠z del proyecto


```r
import("data/raw/surveillance_linelist_20141201.csv") # works on almost any computer
```

--

**Utiliza `here()` para crear la ruta del archivo** sin barras

`here("data", "raw", "surveillance_linelist_raw.csv")`

--

**El paso final** es colocar el `here()` comando de ruta del archivo *dentro de* `import()`


```r
surv_raw &lt;- import(here("data", "raw", "surveillance_linelist_20141201.csv"))
```

--

*En `&lt;-` guarda el conjunto de datos como un objeto con el nombre `surv_raw`.*

???
Los ense√±amos aqu√≠() porque elimina la necesidad de manejar barras inclinadas, y es realmente √∫til cuando llegas a los informes automatizados.

---

class: medium-large-table

# Los datos

<div class="datatables html-widget html-fill-item" id="htmlwidget-46bd134d3204e2ef4485" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-46bd134d3204e2ef4485">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25"],[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25],["694928","86340d","92d002","544bd1","6056ba","eb5aeb","e64e04","5a65bb","2ae019","7ca4c0","699d82","30af4f","a06123","27c07d","8f654c","dc1730","9b5dec","f8cd8f","e4bee8","f23f4e","6e9925","668458","7bb784","d74a9e","2772c3"],["11/9/2014","10/30/2014","8/16/2014","8/29/2014","10/20/2014","10/28/2014","10/6/2014","9/21/2014","5/6/2014","9/29/2014","11/27/2014","","9/10/2014","9/12/2014","10/19/2014","9/26/2014","9/7/2014","10/18/2014","6/22/2014","9/14/2014","9/9/2014","10/21/2014","10/21/2014","11/12/2014","10/24/2014"],["m","f","f","f","f","f","f","m","m","m","m","f","m","m","f","m","m","f","f","m","f","m","m","m","m"],[23,1,16,10,0,8,7,4,37,11,27,6,10,20,6,13,22,11,3,60,26,19,9,18,2],["","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","years","months","years","years"],["Other","Port Hospital","","","","Port Hospital","","Port Hospital","Other","Port Hospital","Port Hospital","Port Hospital","","Other","Military Hospital","Central Hospital","St. Mark's Maternity Hospital (SMMH)","Port Hospital","Other","Other","Other","St. Mark's Maternity Hospital (SMMH)","Central Hospital","Other",""],[70,18,59,39,-11,34,32,41,81,56,76,30,55,72,37,62,60,47,30,84,69,68,79,59,30],[147,29,133,106,24,104,91,74,167,163,178,75,125,151,86,148,159,114,63,245,148,153,175,153,67],["yes","yes","yes","yes","yes","yes","no","yes","yes","yes","yes","no","yes","yes","yes","","yes","no","yes","yes","yes","no","yes","yes","yes"],["no","no","no","no","yes","no","no","yes","no","no","yes","no","no","yes","no","","no","no","no","no","no","yes","no","no","no"],["yes","yes","yes","yes","yes","yes","yes","yes","yes","yes","yes","yes","no","yes","no","","yes","yes","yes","no","no","yes","yes","yes","yes"],["no","no","no","no","no","no","yes","no","no","no","no","no","no","yes","no","","no","no","no","no","no","no","no","no","no"],["no","no","yes","yes","yes","yes","yes","yes","no","no","no","yes","no","no","yes","","yes","yes","no","yes","yes","no","no","yes","no"],[39.2,39.4,39.3,39.3,38.6,38.2,36.5,39.1,39.5,38.9,39.4,37.5,38,38.8,39.2,36.2,38.2,37.5,39.1,38.9,39.1,37.2,38.7,38.9,39.8],[32.39390994,214.0309156,33.35406185,34.70986116,-190.9722222,31.43491124,38.64267601,74.87216947,29.04370899,21.07719523,23.98687034,53.33333333,35.2,31.57756239,50.02704164,28.30533236,23.7332384,36.16497384,75.58578987,13.9941691,31.50109569,29.0486565,25.79591837,25.20398137,66.83002896000001],["","Mountain Rural","Mountain Rural","East II","West III","West III","Mountain Rural","Mountain Rural","West III","West III","Mountain Rural","West I","Mountain Rural","West II","West II","West III","West II","West II","Central I","Central II","West I","West III","Mountain Rural","East II","Mountain Rural"],["SL040102","SL040102","SL040102","SL040204","SL040208","SL040208","SL040102","SL040102","SL040208","SL040208","SL040102","SL040206","SL040102","SL040207","SL040207","SL040208","SL040207","SL040207","SL040201","SL040202","SL040206","SL040208","SL040102","SL040204","SL040102"],["Central II","Central II","Mountain Rural","East II","West III","West III","Mountain Rural","Mountain Rural","West III","West III","Mountain Rural","West I","Mountain Rural","West II","West II","West III","West II","West II","Central I","Central II","Central II","West III","Mountain Rural","East II","Central II"],[false,true,true,true,true,false,true,true,true,true,false,true,true,true,true,false,true,true,true,true,false,true,true,true,true],["11/9/2014","10/31/2014","8/20/2014","8/30/2014","10/21/2014","11/1/2014","10/10/2014","9/22/2014","5/11/2014","9/30/2014","11/28/2014","11/10/2014","9/15/2014","9/15/2014","10/19/2014","9/27/2014","9/11/2014","10/19/2014","6/25/2014","9/18/2014","9/10/2014","10/23/2014","10/22/2014","11/12/2014","10/25/2014"],[8.453538571999999,8.470122275,8.454882422000001,8.484896061000001,8.467532547999999,8.452985424,8.474794458,8.462900412,8.452506080999999,8.456236007999999,8.465821021,8.478479549999999,8.469755298000001,8.461030291,8.465708204,8.456338428,8.466538458,8.467451204,8.478470939999999,8.487316046,8.483711029,8.462788073,8.463369754,8.482723023,8.462216115],[-13.20963625,-13.21314431,-13.21094789,-13.22525323,-13.26645243,-13.26243993,-13.22028905,-13.21564488,-13.26809408,-13.26695002,-13.21178312,-13.24747771,-13.21416774,-13.23493492,-13.23316849,-13.26466626,-13.23375243,-13.23348154,-13.22992349,-13.23619714,-13.24692135,-13.26936217,-13.21540756,-13.212511,-13.22137963],["no","yes","yes","yes","yes","yes","yes","yes","yes","yes","yes","yes","yes","yes","yes","yes","yes","yes","yes","yes","yes","yes","yes","yes","yes"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>row_num<\/th>\n      <th>case_id<\/th>\n      <th>onset date<\/th>\n      <th>sex<\/th>\n      <th>age<\/th>\n      <th>age unit<\/th>\n      <th>hospital<\/th>\n      <th>wt (kg)<\/th>\n      <th>ht (cm)<\/th>\n      <th>fever<\/th>\n      <th>chills<\/th>\n      <th>cough<\/th>\n      <th>aches<\/th>\n      <th>vomit<\/th>\n      <th>temp<\/th>\n      <th>bmi<\/th>\n      <th>adm3_name_res<\/th>\n      <th>admin3pcod<\/th>\n      <th>adm3_name_det<\/th>\n      <th>lab_confirmed<\/th>\n      <th>date of report<\/th>\n      <th>lat<\/th>\n      <th>lon<\/th>\n      <th>epilink<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollY":300,"scrollX":600,"pageLength":25,"fontSize":"25%","dom":"ti","ordering":false,"rownames":false,"options":{"pageLength":5,"scrollX":true},"class":"white-space: nowrap","columnDefs":[{"className":"dt-right","targets":[1,5,8,9,15,16,22,23]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false},"selection":{"mode":"multiple","selected":null,"target":"row","selectable":null}},"evals":[],"jsHooks":[]}</script>

.nota[Aqu√≠ s√≥lo se muestran 25 filas]

???
La tabla muestra s√≥lo las 25 primeras filas, para que se cargue m√°s r√°pido.

---

class: inverse, center, middle

# Demostraci√≥n en vivo

## Nuevo proyecto RStudio y script R

&lt;img src="../../images/functions_packages/piano_man.jpg" width="50%" /&gt;

---

class: inverse, center, middle

## Limpieza de datos en R

&lt;img src="../../images/data_cleaning/data_cleaning.png" width="75%" /&gt;

---

# Datos limpios, datos desordenados

Ahora tus datos est√°n importados. ¬øQu√© suele implicar la "limpieza" de un conjunto de datos?

.pull-left[

&lt;img src="../../images/data_cleaning/tidy_broom.png" width="75%" /&gt;

]

--

.pull-right[

- Prepara el an√°lisis y la visualizaci√≥n

- Normaliza los nombres de las columnas

- Subconjuntar filas y columnas

- Alinear graf√≠as

- Crear variables categ√≥ricas y calculadas

- Unir con otros datos

- Eliminar duplicados...

]

.nota[]

???
Pregunta a los participantes qu√© medidas toman para limpiar los conjuntos de datos

---

# En {dplyr} paquete

.pull-left[

&lt;img src="../../images/data_cleaning/dplyr_hex.png" width="75%" /&gt;

]

.pull-right[

- El paquete m√°s sencillo y vers√°til para la limpieza de datos

- Este paquete se instala en un universo de {tidyverse} paquetes R

- La p√°gina {tidyverse} ha transformado R en los √∫ltimos 10 a√±os

]

.nota["dplyr" es la abreviatura de "pinza de datos" - una pinza es la herramienta de mano que aparece en la imagen de arriba]

???
Tidyverse ha hecho que la codificaci√≥n en R sea mucho m√°s f√°cil de usar, intuitiva y accesible para los codificadores principiantes

---

# Conjunto de datos de pr√°ctica

Vamos a utilizar un mini **`surv_raw`** conjunto de datos para practicar algunas funciones b√°sicas de R.



&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; case_id &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; age &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; sex &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; lab_confirmed &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; onset date &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; wt (kg) &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 694928 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 23 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; m &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FALSE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 11/9/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 70 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 86340d &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 10/30/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 92d002 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; m &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/16/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 59 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/29/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 39 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/29/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 39 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FALSE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/29/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 39 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Funciones para hoy

| Funci√≥n | Utilidad                               | 
| ------- | -------------------------------------- |
| `filter()`        | subconjunto **filas**                           | 
| `select()`        | subconjunto **columnas**                           | 
| `clean_names()`        | normalizar los nombres de las columnas | 
| `rename()`        | renombrar columnas manualmente         | 
| `mutate()`        | crear y transformar columnas           | 
| `mdy()`, `dmy()`, `ymd()`      | dile a R c√≥mo entender las fechas      | 

---

class: medium-large-table2

# `filter()` filas

.pull-left[


```r
filter(surv_raw)
```

1er argumento: un marco de datos

]

.pull-right[

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; case_id &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; age &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; sex &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; lab_confirmed &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; onset date &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; wt (kg) &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 694928 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 23 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; m &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FALSE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 11/9/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 70 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 86340d &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 10/30/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 92d002 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; m &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/16/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 59 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/29/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 39 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/29/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 39 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FALSE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/29/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 39 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

]

---

class: medium-large-table2

# `filter()` filas

.pull-left[


```r
filter(surv_raw, age &lt; 18)
```

2¬∫+ argumentos: pruebas l√≥gicas para que las filas sean *mantener*

]

.pull-right[

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; case_id &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; age &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; sex &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; lab_confirmed &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; onset date &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; wt (kg) &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 86340d &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 10/30/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 92d002 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; m &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/16/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 59 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/29/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 39 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/29/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 39 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FALSE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/29/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 39 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

]

---

class: medium-large-table2

# `filter()` filas

.pull-left[


```r
filter(surv_raw, age &lt; 18, sex == "f")
```

2¬∫+ argumentos: pruebas l√≥gicas para que las filas sean *mantener*

]

.pull-right[

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; case_id &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; age &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; sex &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; lab_confirmed &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; onset date &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; wt (kg) &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 86340d &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 10/30/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/29/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 39 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/29/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 39 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FALSE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/29/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 39 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

]

.footnote[Observa el uso de doble igual `==` para comprobar la equivalencia].

---

class: medium-large-table2

# `filter()` filas

.pull-left[


```r
filter(surv_raw, 
  age &lt; 18 &amp; 
  (sex == "f" | lab_confirmed == TRUE)
)
```

*Las nuevas l√≠neas y las sangr√≠as no afectan al c√≥digo*

La l√≥gica puede volverse compleja utilizando:

- `&amp;` (Y)
- `|` (O)
- Par√©ntesis

]

.pull-right[

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; case_id &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; age &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; sex &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; lab_confirmed &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; onset date &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; wt (kg) &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 86340d &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 10/30/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 92d002 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; m &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/16/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 59 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/29/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 39 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/29/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 39 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FALSE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/29/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 39 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

]

---

class: medium-large-table2

# `select()` columnas

.pull-left[


```r
select(surv_raw, ___) 
```

`select()` tambi√©n espera un marco de datos como primer argumento

]

.pull-right[

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; case_id &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; age &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; sex &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; lab_confirmed &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; onset date &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; wt (kg) &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 694928 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 23 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; m &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FALSE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 11/9/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 70 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 86340d &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 10/30/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 92d002 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; m &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/16/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 59 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/29/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 39 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/29/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 39 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FALSE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/29/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 39 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

]

---

class: medium-large-table2

# `select()` columnas

.pull-left[


```r
select(surv_raw, case_id, age)
```

Puedes proporcionar `select()` con nombres de columnas a *mantener*

]

.pull-right[

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; case_id &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; age &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 694928 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 23 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 86340d &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 92d002 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

]

---

class: medium-large-table2

# `select()` columnas

.pull-left[


```r
select(surv_raw, case_id, age, sex)
```

Puedes proporcionar `select()` con nombres de columnas a *mantener*

]

.pull-right[

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; case_id &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; age &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; sex &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 694928 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 23 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; m &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 86340d &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 92d002 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; m &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

]

---

class: medium-large-table2

# `select()` columnas

.pull-left[


```r
select(surv_raw, -case_id, -lab_confirmed)
```

O puedes designar qu√© columnas *eliminar* con -.

]

.pull-right[

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; age &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; sex &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; onset date &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; wt (kg) &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 23 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; m &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 11/9/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 70 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 10/30/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 16 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; m &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/16/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 59 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/29/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 39 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/29/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 39 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/29/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 39 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

]

---

# `filter()` *y* `select()`?

¬°S√≠! Utiliza el **%&gt;%** "para "pasar" datos de una funci√≥n a otra.

.tirar-izquierda\[

Es como decir las palabras **"y entonces"**.

Una orden de limpieza t√≠pica contiene un *secuencia* de pasos enlazados

- Cambiar el nombre de las columnas
- Filtrar filas
- Seleccionar columnas
- Deduplicar
- Limpiar valores...

]

.pull-right[

&lt;img src="../../images/data_cleaning/cleaning.png" width="75%" /&gt;

]

---

class: medium-large-table2

# Datos de la tuber√≠a

Anteriormente, el 1er argumento era el marco de datos

`filter(`**sobrevivir\_sin procesar**`, age &lt; 18)`

--

Usando tuber√≠as, esto se escribe ahora como

**surv\_raw** `%&gt;% filter(age &lt; 18)`

--

Puedes canalizar los datos a trav√©s de *m√∫ltiples* funciones  
`surv_raw`

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; case_id &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; age &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; sex &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; lab_confirmed &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; onset date &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; wt (kg) &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 694928 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 23 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; m &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FALSE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 11/9/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 70 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 86340d &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 10/30/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 92d002 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; m &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/16/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 59 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/29/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 39 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/29/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 39 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FALSE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/29/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 39 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

class: medium-large-table2

# Datos de tuber√≠as

Anteriormente, el 1er argumento era el marco de datos

`filter(`**sobrevivir\_sin procesar**`, age &lt; 18)`

Usando tuber√≠as, esto se escribe ahora como

**surv\_raw** `%&gt;% filter(age &lt; 18)`

Puedes canalizar los datos a trav√©s de *m√∫ltiples* funciones  
`surv_raw` **%&gt;%** `filter(age &lt; 18)`

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; case_id &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; age &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; sex &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; lab_confirmed &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; onset date &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; wt (kg) &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 86340d &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 10/30/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 92d002 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; m &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/16/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 59 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/29/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 39 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/29/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 39 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FALSE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/29/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 39 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

class: medium-large-table2

# Datos de la tuber√≠a

Anteriormente, el 1er argumento era el marco de datos

`filter(`**sobrevivir\_sin procesar**`, age &lt; 18)`

Usando tuber√≠as, esto se escribe ahora como

**surv\_raw** `%&gt;% filter(age &lt; 18)`

Puedes canalizar los datos a trav√©s de *m√∫ltiples* funciones  
`surv_raw` **%&gt;%** `filter(age &lt; 18)` **%&gt;%** `select(case_id, age, sex)`

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; case_id &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; age &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; sex &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 86340d &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 92d002 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; m &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Estilo de codificaci√≥n vertical

A *vertical* con sangr√≠as no afecta al c√≥digo, ¬°pero lo hace m√°s legible!


```r
surv_raw
```

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; case_id &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; age &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; sex &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; lab_confirmed &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; onset date &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; wt (kg) &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 694928 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 23 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; m &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FALSE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 11/9/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 70 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 86340d &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 10/30/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 92d002 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; m &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/16/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 59 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/29/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 39 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/29/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 39 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FALSE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/29/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 39 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Estilo de codificaci√≥n vertical

A *vertical* con sangr√≠as no afecta al c√≥digo, ¬°pero lo hace m√°s legible!








```r
surv_raw %&gt;% 
  select(case_id, age, sex, lab_confirmed)        # seleccionar columnas
```







&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; case_id &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; age &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; sex &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; lab_confirmed &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 694928 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 23 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; m &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FALSE &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 86340d &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 92d002 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; m &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FALSE &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Estilo de codificaci√≥n vertical

En **`%&gt;%`** pasa el conjunto de datos al siguiente paso








```r
surv_raw %&gt;% 
  select(case_id, age, sex, lab_confirmed) %&gt;%    # seleccionar columnas
  distinct()                                         # de-duplicar
```

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; case_id &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; age &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; sex &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; lab_confirmed &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 694928 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 23 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; m &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FALSE &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 86340d &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 92d002 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; m &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FALSE &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Estilo de codificaci√≥n vertical

En **`%&gt;%`** pasa el conjunto de datos al siguiente paso








```r
surv_raw %&gt;% 
  select(case_id, age, sex, lab_confirmed) %&gt;%    # seleccionar columnas
  distinct() %&gt;%                                     # de-duplicar
  filter(age &lt; 18, lab_confirmed == TRUE)            # s√≥lo los casos confirmados de ni√±os peque√±os
```

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; case_id &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; age &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; sex &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; lab_confirmed &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 86340d &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 92d002 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; m &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Estilo de codificaci√≥n vertical

En **`%&gt;%`** pasa el conjunto de datos al siguiente paso








```r
surv_raw %&gt;% 
  select(case_id, age, sex, lab_confirmed) %&gt;%    # seleccionar columnas
  distinct() %&gt;%                                     # de-duplicar
  filter(age &lt; 18, lab_confirmed == TRUE) %&gt;%        # casos confirmados s√≥lo en ni√±os peque√±os      
  mutate(infant = ifelse(age &lt; 1, "infant", "not infant"))  # crear una columna      
```

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; case_id &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; age &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; sex &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; lab_confirmed &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; infant &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 86340d &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; infant &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 92d002 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; m &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; not infant &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; not infant &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Estilo de codificaci√≥n vertical

¬øHay un operador de tuber√≠a al final de este flujo de trabajo?








```r
surv_raw %&gt;% 
  select(case_id, age, sex, lab_confirmed) %&gt;%    # seleccionar columnas
  distinct() %&gt;%                                     # de-duplicar
  filter(age &lt; 18, lab_confirmed == TRUE) %&gt;%        # casos confirmados s√≥lo en ni√±os peque√±os      
  mutate(infant = ifelse(age &lt; 1, "infant", "not infant"))  # crear una columna      
```

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; case_id &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; age &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; sex &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; lab_confirmed &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; infant &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 86340d &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; infant &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 92d002 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; m &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; not infant &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; not infant &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

--

Las tuber√≠as conectan todas estas funciones en un √∫nico comando enlazado.  
¬øC√≥mo ejecutar√≠as este comando en RStudio?

---

# Limpia los nombres de las columnas

Podemos observar los cambios en los nombres de las columnas imprimi√©ndolos con `names()`


```r
# print current column names
names(surv_raw)  
```

```
## [1] "case_id"       "age"           "sex"           "lab_confirmed"
## [5] "onset date"    "wt (kg)"
```

---

# Limpia los nombres de las columnas

De forma equivalente, `surv_raw` puede pasarse a `names()` utilizando un **tuber√≠a**:


```r
surv_raw %&gt;%  # begin with raw data
  names()     # print current column names                           
```


```
## [1] "case_id"       "age"           "sex"           "lab_confirmed"
## [5] "onset date"    "wt (kg)"
```

--

Aplica `clean_names()` a `surv_raw` insert√°ndolo en la secuencia de tuber√≠as.  
As√≠ se normalizan los nombres de las columnas (en min√∫sculas, sin espacios ni caracteres especiales).


```r
surv_raw %&gt;%            # begin with raw data
* clean_names() %&gt;%     # standardize column names
  names()               # print current column names
```

```
## [1] "case_id"       "age"           "sex"           "lab_confirmed"
## [5] "onset_date"    "wt_kg"
```

*Ver cambios en las dos √∫ltimas columnas*

---

# Limpia los nombres de las columnas

De forma equivalente, `surv_raw` puede pasarse a `names()` utilizando un **tuber√≠a**:


```r
surv_raw %&gt;%  # begin with raw data
  names()     # print current column names                           
```


```
## [1] "case_id"       "age"           "sex"           "lab_confirmed"
## [5] "onset date"    "wt (kg)"
```

A continuaci√≥n, canaliza el **limpio** a `rename()` para editarlos manualmente.  
Ten en cuenta que `rename()` hace referencia a **limpiado** limpios (`onset_date`).



---

# Imprimir vs. guardar

Haz clic en las pesta√±as para ver la diferencia.

.panelset[
.panel[.panel-name[Printing]

Los cambios anteriores a `surv_raw` eran **no** salvados.

S√≥lo *imprimimos con modificaciones*.



**`surv_raw`** todav√≠a tiene el *nombres originales de las columnas* ¬°!




.panel[.panel-name[Saving]

Utiliza la funci√≥n **`&lt;-`** para guardar los cambios en un nuevo **`surv_clean`** marco de datos.

No se imprime ninguna salida, pero el nuevo objeto aparecer√° en el Entorno RStudio.


```r
# create new data frame
*surv_clean &lt;- surv_raw %&gt;%
  clean_names() %&gt;%          
  rename(                           
      age_years  = age,                 
      date_onset = onset_date)
```

**`surv_clean`** tiene el *nombres de columna limpios* ¬°!



]
]

]

---

class: medium-large-table2

# `mutate()` a *crear* columnas

La sintaxis es


```r
DATASET %&gt;% 
  mutate(NEW_COLUMN_NAME = A_FUNCTION(arguments))
```

.pull-left[


```r
surv_raw %&gt;% 
  mutate(age_group = ifelse(
    test = age &gt;= 18,
    yes = "adult",  
    no = "minor")) 
```

`ifelse()` comprueba l√≥gicamente cada fila y escribe en la nueva `age_group` columna:

- "adulto" si la prueba es VERDADERA
- "menor" si la prueba es FALSA

]

.pull-right[

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; case_id &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; age &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; sex &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; lab_confirmed &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; onset date &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; wt (kg) &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; age_group &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 694928 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 23 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; m &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FALSE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 11/9/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 70 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; adult &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 86340d &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 10/30/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; minor &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 92d002 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; m &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/16/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 59 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; minor &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/29/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 39 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; minor &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/29/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 39 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; minor &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; f &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FALSE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/29/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 39 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; minor &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

]

---

class: medium-large-table2

# `mutate()` a *editar* columnas

La sintaxis es similar:


```r
DATASET %&gt;% 
  mutate(SAME_COLUMN_NAME = A_FUNCTION(arguments))
```

.pull-left[


```r
surv_raw %&gt;% 
  mutate(sex = recode(sex,  
    "m" = "male",           
    "f" = "female"))        
```

Columna `sex` se sobrescribe.

`recode()` comienza con el original `sex` y aplica los cambios:

- "m" a "hombre"
- "f" a "mujer"

]

.pull-right[

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; case_id &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; age &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; sex &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; lab_confirmed &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; onset date &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; wt (kg) &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 694928 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 23 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; male &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FALSE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 11/9/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 70 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 86340d &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; female &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 10/30/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 92d002 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; male &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/16/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 59 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; female &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/29/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 39 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; female &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; TRUE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/29/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 39 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 544bd1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; female &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FALSE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8/29/2014 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 39 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

]

---

# `mutate()` con fechas

En `class()` de las columnas de fecha debe ser "fecha", no "car√°cter".

Para cambiar la clase, debes *indicar a* R c√≥mo entender las fechas en bruto.

.pull-left[

Las fechas tienen muchos formatos:

¬ø"03/09/2024" es el 9 de marzo o el 3 de septiembre?

]

.pull-right[

&lt;img src="../../images/data_cleaning/Dates_500x500.png" width="100%" /&gt;

]

.footnote\[M√°s detalles en este [Cap√≠tulo del Manual de Epi](https://epirhandbook.com/en/working-with-dates.html)]

---

# Convertir a clase fecha

En `mutate()` utiliza el bot√≥n {lubridate} que se alinea con la funci√≥n *formato de fecha en bruto*.

- `ymd()` si los valores brutos son AAAA-MM-DD
- `dmy()` si los valores brutos son DD-MM-AAAA
- `mdy()` si los valores brutos son MM-DD-AAAA

--

.pull-left[


```r
surv_clean %&gt;% 
  select(case_id, date_onset) %&gt;% 
  tibble()
```

```
## # A tibble: 6 √ó 2
##   case_id date_onset
##   &lt;chr&gt;   &lt;chr&gt;     
## 1 694928  11/9/2014 
## 2 86340d  10/30/2014
## 3 92d002  8/16/2014 
## 4 544bd1  8/29/2014 
## 5 544bd1  8/29/2014 
## 6 544bd1  8/29/2014
```

]

--

.pull-right[


```r
surv_clean %&gt;% 
* mutate(date_onset = mdy(date_onset)) %&gt;%
  select(case_id, date_onset) %&gt;% 
  tibble()
```

```
## # A tibble: 6 √ó 2
##   case_id date_onset
##   &lt;chr&gt;   &lt;date&gt;    
## 1 694928  2014-11-09
## 2 86340d  2014-10-30
## 3 92d002  2014-08-16
## 4 544bd1  2014-08-29
## 5 544bd1  2014-08-29
## 6 544bd1  2014-08-29
```

]

.footnote[La `tibble()` muestra la clase de cada columna encima de sus valores].

---

class: inverse, center, middle

## Ejercicio

Ir al sitio web del curso  
Abre el ejercicio del M√≥dulo 2 e inicia sesi√≥n  
Sigue las instrucciones para crear un nuevo proyecto RStudio y empieza a programar  
Avisa a un instructor si no est√°s seguro de lo que tienes que hacer

&lt;img src="../../images/breakout/COVID dominoes.png" width="100%" /&gt;


    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>

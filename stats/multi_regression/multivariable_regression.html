<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Advanced statistics in R</title>
    <meta charset="utf-8" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# Advanced statistics in R
]
.subtitle[
## Regression - variable selection and multivariable regression
]
.author[
### 
]
.date[
### <a href="mailto:contact@appliedepi.org">contact@appliedepi.org</a>
]

---










&lt;style type="text/css"&gt;
    .remark-slide table{
      border: none
    }
    .remark-slide-table {
      
    }
    tr:first-child {
      border-top: none;
  }
    tr:last-child {
    border-bottom: none;
  }
    .tiny .remark-code { /*Change made here*/
  font-size: 50% !important;
    }
    .teenytiny .remark-code { /*Change made here*/
  font-size: 25% !important;
    }
    .giant .remark-code { /*Change made here*/
  font-size: 150% !important;
    }
    .smaller .remark-code { /*Change made here*/
  font-size: 75% !important;
    }
  
&lt;/style&gt;




# Multivariable regression

Now that you are experts at conducting univariable regression in R, it is time to move onto multivariable regression!

---

# Multivariable regression - when univariable is just not enough

Multivariable regression allows us to look at the relationship between our dependent variable and multiple independent variables. 

It considers the relationship of each independent variable _in context_ with the dependent variable. This allows us to understand which of the variables could have a true association with the outcome once they are controlled for by other variables.

---

# Confounding

Multivariable regression estimates the association between the independent variable and the outcome by holding all other variables constant.

This allows us to account for *confounding*.

---

# Confounding

A confounder is a variable that influences both the dependent variable and the independent variable, causing a spurious association.

&lt;img src="../../images/regression/confounder_wikipedia.png" width="125%" /&gt;
https://upload.wikimedia.org/wikipedia/commons/5/53/Comparison_confounder_mediator.svg


---

# Confounding

So icecream is causing sharks to bite humans?

&lt;img src="../../images/regression/icecream_sharks.png" width="100%" /&gt;

---

# Terms to know

* Cross validation: A method of model validation which uses different portions of the data to train and test the model. 
     This is done to understand how well the model works in practice, rather than just on the data it is trained on.
     
* In sample: The data the model is trained on.

* Out of sample: The data the model is predicted to.

---

# Variable selection

How do we know what to put into our model?

Do we put in all the data?

Do we include only what we _know_ is likely to be useful?

Do we carry out some sort of stepwise approach?

---

# Variable selection

How do we know what to put into our model?

Do we put in all the data?

Do we include only what we _know_ is likely to be useful?

Do we carry out some sort of stepwise approach?

**We should avoid all of these!**

---

# Do's and do not's

*The do's*
Expert knowledge
- Think about the research question you are trying to answer, statistics should follow a theory now the other way round.
- If you, or the literature, thinks something is important add it!
 - A non-significant result in these is a useful result

*The do not's*
Stepwise variable selection
 - This is no longer recommended for several reasons, but in summary it can remove useful and retain useless variables due to coincidence rather than real world meaning.
Screening using a univariable regression
- Non-significant variables can still affect parameter estimates, so it would be wrong to discard them
- This can reject important variables when there is confounding
 
This is only a brief summary, please read further into the topic with this blog post for further information (https://towardsdatascience.com/stopping-stepwise-why-stepwise-selection-is-bad-and-what-you-should-use-instead-90818b3f52df)

---

# Lasso variable selection

If you are presented with a large number of variables, and there is some uncertainty in what is important, you can use a technique called Lasso (Least Absolute Shrinkage and Selection Operator) regression.

Lasso regression works by testing variable and data combinations to create a model which has the **least** difference in predictions between the **in-sample** and the **out-of-sample** datasets.

This (generally) gives us a model that predicts well to new data sources (out of sample).

---

#Lasso variable selection

1) First we set up the lasso regression using the function `trainControl()` from the **caret** package.


```r
fitControl &lt;- trainControl(
     method = "repeatedcv",  
     number = 5,     
     repeats = 10)  
```

???
Talk through each of method/number/repeats

method - This stands for repeated cross validation, the process of taking out a "chunk" of the dataset and trying to predict it using the rest of the dataset. This is done to make sure the model is not overfitting

number - Split the data into 5 sections (20% removed each time) - the smaller the number the larger the "chunks" in the dataset. This makes the fitting harder to do, but can help increase the validity of predictions

repeats - Repeat 10 times with different "cuts" of the data to ensure the result we get is a true relationship and not just do to a "lucky" or "unlucky" split of the data

---

# Cross validation


```r
fitControl &lt;- trainControl(
     method = "repeatedcv",  
     number = 5,     
     repeats = 10)  
```


&lt;img src="../../images/regression/KfoldCV.gif" width="100%" /&gt;

???

Talk through this gif in the context of the last slide

---

# Run the lasso regression

1) First we subset our data to the potential independent variables of interest, and the dependent variable.

2) Then we use `train()` from **caret** to run the lasso regression (in caretwe specify `method = "glmnet"`) according to the conditions we specified with `trainControl()`


```r
data_use &lt;- linelist %&gt;%
    select(gender, 
           age, 
           hospital:bmi, 
           blood_ct, 
           outcome_death) %&gt;%
     drop_na()

lasso_fit &lt;- train(form = outcome_death ~ .,
                   data = data_use,
                   method = "glmnet",
                   trControl = fitControl)
```

---

# Lasso results

Then we use the function `predictors()` from **caret** to 


```r
lasso_predictors_raw &lt;- predictors(lasso_fit)

lasso_predictors_raw
```

```
##  [1] "hospitalMilitary Hospital" "hospitalOther"            
##  [3] "hospitalPort Hospital"     "districtEast I"           
##  [5] "districtEast II"           "districtWest II"          
##  [7] "district_resCentral II"    "district_resEast I"       
##  [9] "district_resEast II"       "district_resWest I"       
## [11] "district_resWest II"       "district_detEast I"       
## [13] "district_detEast II"       "district_detWest II"      
## [15] "wt_kg"                     "feveryes"                 
## [17] "coughyes"
```

???
Talk through these predictors and why some have "hospital" in front of them (factor and then the level that is important)

---

# Lasso results

We can then process these to get them ready for use using `str_extract()` from the **stringi** package.

This takes our results and removes everything _not_ found in the column names in our dataset.

.smaller[

```r
lasso_predictors_clean &lt;- str_extract(string = lasso_predictors_raw,
                                      pattern = paste(colnames(data_use),   
                                             collapse = "|"))
lasso_predictors_clean
```

```
##  [1] "hospital" "hospital" "hospital" "district" "district" "district"
##  [7] "district" "district" "district" "district" "district" "district"
## [13] "district" "district" "wt_kg"    "fever"    "cough"
```
]
---

# Expert knowledge is important

Are we done now, did lasso solve our model building?

---

# Expert knowledge is important

Are we done now, did lasso solve our model building?

&lt;font size="46"&gt;No!&lt;/font&gt;

If there is a variable that you think should be included, include it!
---

# Carrying out our multivariable regression

Now we are ready to carry out our multivariable regression!

This is done in a slightly different way to our univariable regression. We will be using **base** R's `glm()` function and then tidying up the outputs using the function `tbl_regression` from **gtsummary**.

---

#Carrying out multivariable regression


```r
multivariable_regression_table &lt;- data_use %&gt;%
     select(lasso_predictors_clean, 
            outcome_death,
            temp,
            age) %&gt;%
     glm(formula = outcome_death ~.,
         family = binomial) %&gt;%
     tbl_regression(exponentiate = TRUE)
```

???
Talk through the stages, what formula means, what family means, remind them what exponentiate = TRUE means

---

# Displaying results

.smaller[
<div id="cmzourldoj" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#cmzourldoj .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 13px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#cmzourldoj .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#cmzourldoj .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#cmzourldoj .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#cmzourldoj .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#cmzourldoj .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#cmzourldoj .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#cmzourldoj .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#cmzourldoj .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#cmzourldoj .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#cmzourldoj .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#cmzourldoj .gt_group_heading {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#cmzourldoj .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#cmzourldoj .gt_from_md > :first-child {
  margin-top: 0;
}

#cmzourldoj .gt_from_md > :last-child {
  margin-bottom: 0;
}

#cmzourldoj .gt_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#cmzourldoj .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#cmzourldoj .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#cmzourldoj .gt_row_group_first td {
  border-top-width: 2px;
}

#cmzourldoj .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
}

#cmzourldoj .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#cmzourldoj .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#cmzourldoj .gt_last_summary_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#cmzourldoj .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
}

#cmzourldoj .gt_first_grand_summary_row {
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#cmzourldoj .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#cmzourldoj .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#cmzourldoj .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#cmzourldoj .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 1px;
  padding-right: 1px;
  padding-left: 5px;
  padding-right: 5px;
}

#cmzourldoj .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#cmzourldoj .gt_sourcenote {
  font-size: 90%;
  padding-top: 1px;
  padding-bottom: 1px;
  padding-left: 5px;
  padding-right: 5px;
}

#cmzourldoj .gt_left {
  text-align: left;
}

#cmzourldoj .gt_center {
  text-align: center;
}

#cmzourldoj .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#cmzourldoj .gt_font_normal {
  font-weight: normal;
}

#cmzourldoj .gt_font_bold {
  font-weight: bold;
}

#cmzourldoj .gt_font_italic {
  font-style: italic;
}

#cmzourldoj .gt_super {
  font-size: 65%;
}

#cmzourldoj .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

#cmzourldoj .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#cmzourldoj .gt_indent_1 {
  text-indent: 5px;
}

#cmzourldoj .gt_indent_2 {
  text-indent: 10px;
}

#cmzourldoj .gt_indent_3 {
  text-indent: 15px;
}

#cmzourldoj .gt_indent_4 {
  text-indent: 20px;
}

#cmzourldoj .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="2" colspan="1" scope="col"><strong>Characteristic</strong></th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="4" scope="colgroup">
        <span class="gt_column_spanner">Univariable</span>
      </th>
      <th class="gt_center gt_columns_top_border gt_column_spanner_outer" rowspan="1" colspan="3" scope="colgroup">
        <span class="gt_column_spanner">Multivariable</span>
      </th>
    </tr>
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col"><strong>N</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col"><strong>OR</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col"><strong>95% CI</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col"><strong>p-value</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col"><strong>OR</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col"><strong>95% CI</strong><sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col"><strong>p-value</strong></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">hospital</td>
<td class="gt_row gt_center">217</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Central Hospital</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Military Hospital</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">0.73</td>
<td class="gt_row gt_center">0.24, 2.09</td>
<td class="gt_row gt_center">0.6</td>
<td class="gt_row gt_center">0.57</td>
<td class="gt_row gt_center">0.17, 1.82</td>
<td class="gt_row gt_center">0.3</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Other</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">0.67</td>
<td class="gt_row gt_center">0.22, 1.93</td>
<td class="gt_row gt_center">0.5</td>
<td class="gt_row gt_center">0.47</td>
<td class="gt_row gt_center">0.14, 1.52</td>
<td class="gt_row gt_center">0.2</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Port Hospital</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">1.92</td>
<td class="gt_row gt_center">0.68, 5.22</td>
<td class="gt_row gt_center">0.2</td>
<td class="gt_row gt_center">1.52</td>
<td class="gt_row gt_center">0.50, 4.51</td>
<td class="gt_row gt_center">0.5</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">SMMH</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">0.89</td>
<td class="gt_row gt_center">0.22, 3.63</td>
<td class="gt_row gt_center">0.9</td>
<td class="gt_row gt_center">1.07</td>
<td class="gt_row gt_center">0.23, 5.00</td>
<td class="gt_row gt_center">>0.9</td></tr>
    <tr><td class="gt_row gt_left">district</td>
<td class="gt_row gt_center">217</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Central I</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Central II</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">1.91</td>
<td class="gt_row gt_center">0.32, 15.6</td>
<td class="gt_row gt_center">0.5</td>
<td class="gt_row gt_center">2.81</td>
<td class="gt_row gt_center">0.41, 26.7</td>
<td class="gt_row gt_center">0.3</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">East I</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">7.00</td>
<td class="gt_row gt_center">1.00, 143</td>
<td class="gt_row gt_center">0.091</td>
<td class="gt_row gt_center">7.50</td>
<td class="gt_row gt_center">0.96, 161</td>
<td class="gt_row gt_center">0.092</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">East II</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">1.67</td>
<td class="gt_row gt_center">0.47, 5.92</td>
<td class="gt_row gt_center">0.4</td>
<td class="gt_row gt_center">1.55</td>
<td class="gt_row gt_center">0.40, 6.05</td>
<td class="gt_row gt_center">0.5</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">East III</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">0.95</td>
<td class="gt_row gt_center">0.13, 8.67</td>
<td class="gt_row gt_center">>0.9</td>
<td class="gt_row gt_center">0.82</td>
<td class="gt_row gt_center">0.10, 8.13</td>
<td class="gt_row gt_center">0.9</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">Mountain Rural</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">0.81</td>
<td class="gt_row gt_center">0.27, 2.33</td>
<td class="gt_row gt_center">0.7</td>
<td class="gt_row gt_center">0.93</td>
<td class="gt_row gt_center">0.28, 2.95</td>
<td class="gt_row gt_center">>0.9</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">West I</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">2.55</td>
<td class="gt_row gt_center">0.29, 55.4</td>
<td class="gt_row gt_center">0.4</td>
<td class="gt_row gt_center">3.08</td>
<td class="gt_row gt_center">0.31, 74.6</td>
<td class="gt_row gt_center">0.4</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">West II</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">0.83</td>
<td class="gt_row gt_center">0.26, 2.49</td>
<td class="gt_row gt_center">0.7</td>
<td class="gt_row gt_center">0.80</td>
<td class="gt_row gt_center">0.23, 2.59</td>
<td class="gt_row gt_center">0.7</td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">West III</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">0.85</td>
<td class="gt_row gt_center">0.25, 2.83</td>
<td class="gt_row gt_center">0.8</td>
<td class="gt_row gt_center">1.00</td>
<td class="gt_row gt_center">0.26, 3.73</td>
<td class="gt_row gt_center">>0.9</td></tr>
    <tr><td class="gt_row gt_left">wt_kg</td>
<td class="gt_row gt_center">217</td>
<td class="gt_row gt_center">0.98</td>
<td class="gt_row gt_center">0.96, 1.00</td>
<td class="gt_row gt_center">0.12</td>
<td class="gt_row gt_center">0.97</td>
<td class="gt_row gt_center">0.93, 1.01</td>
<td class="gt_row gt_center">0.10</td></tr>
    <tr><td class="gt_row gt_left">fever</td>
<td class="gt_row gt_center">217</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">no</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">yes</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">0.84</td>
<td class="gt_row gt_center">0.37, 1.82</td>
<td class="gt_row gt_center">0.7</td>
<td class="gt_row gt_center">0.67</td>
<td class="gt_row gt_center">0.14, 3.22</td>
<td class="gt_row gt_center">0.6</td></tr>
    <tr><td class="gt_row gt_left">cough</td>
<td class="gt_row gt_center">217</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">no</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center">—</td>
<td class="gt_row gt_center"></td></tr>
    <tr><td class="gt_row gt_left" style="text-align: left; text-indent: 10px;">yes</td>
<td class="gt_row gt_center"></td>
<td class="gt_row gt_center">2.40</td>
<td class="gt_row gt_center">1.16, 5.02</td>
<td class="gt_row gt_center">0.018</td>
<td class="gt_row gt_center">2.39</td>
<td class="gt_row gt_center">1.07, 5.48</td>
<td class="gt_row gt_center">0.036</td></tr>
    <tr><td class="gt_row gt_left">temp</td>
<td class="gt_row gt_center">217</td>
<td class="gt_row gt_center">0.92</td>
<td class="gt_row gt_center">0.67, 1.25</td>
<td class="gt_row gt_center">0.6</td>
<td class="gt_row gt_center">0.99</td>
<td class="gt_row gt_center">0.54, 1.82</td>
<td class="gt_row gt_center">>0.9</td></tr>
    <tr><td class="gt_row gt_left">age</td>
<td class="gt_row gt_center">217</td>
<td class="gt_row gt_center">0.99</td>
<td class="gt_row gt_center">0.97, 1.01</td>
<td class="gt_row gt_center">0.4</td>
<td class="gt_row gt_center">1.02</td>
<td class="gt_row gt_center">0.98, 1.07</td>
<td class="gt_row gt_center">0.3</td></tr>
  </tbody>
  
  <tfoot class="gt_footnotes">
    <tr>
      <td class="gt_footnote" colspan="8"><sup class="gt_footnote_marks">1</sup> OR = Odds Ratio, CI = Confidence Interval</td>
    </tr>
  </tfoot>
</table>
</div>
]
---

# Displaying results

&lt;img src="multivariable_regression_files/figure-html/unnamed-chunk-14-1.png" width="600px" height="500px" /&gt;

---

# It's now time for you to try it out yourselves!

Any questions?

[Epi R Handbook](epirhandbook.com/)

Course website (initial setup and slides access): [https://appliedepi.github.io/intro_course/](https://appliedepi.github.io/intro_course/)
---







    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
